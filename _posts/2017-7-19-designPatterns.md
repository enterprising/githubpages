---
layout: post
title: 设计模式
date: 2017-7-19 19:00
categories: 设计模式
tags: [设计模式]
top: true
---

* content
{:toc}
## 创建型模式

### 简单工厂模式

要点在于，当你需要什么，只需要传入一个正确的参数，就可以获取你需要的对象，而不需要知道其创建细节。

最大的优点就是：实现了对象的创建和对象的实现分离。对象的创建交给工厂实现。

### 工厂方法模式

简单工厂模式的一种扩展。就是在工厂类的上面再加了一层，简单工厂就相当于只有一个店铺，而工厂方法就是开了很多分店，每家分店就相当简单工厂的总店。负责对象的创建。

优点：增加新的产品类时无需修改现有系统。

缺点：增加新产品的同时需要增加新的工厂，增加了复杂性

### 抽象工厂模式

更复杂的工厂模式。

提供了一个创建一系列相关或互相依赖对象的接口，而无需指定它们具体的类

### 创建者模式

用于创建一个 **很复杂** 的对象。

使用一系列操作设置属性和配置，最后调用一个build方法，这时对象才被真正创建。

创建者抽象类中，定义了对象的创建方法和返回方法。

允许用户只通过指定复杂对象的类型和内容就可以构建它们，不需要知道具体的实现细节。

应用场景：在很多游戏软件中，地图包括天空、地面、背景等组成部分，人物角色包括人体、服装、装备等组成部分，可以使用建造者模式对其进行设计，通过不同的具体建造者创建不同类型的地图或人物。

### 单例模式

这个很好理解了，就是一个类只能有一个实例。但是关于线程问题所以很适合当面试题。

写过一篇详细的博客：<http://blog.tanpeng.net/2017/07/09/singleton/>

<br/>

## 结构型模式

### 适配器模式

将一个类的**接口转换成**客户**期望的另一个接口**。

适配器让原本接口不兼容的类可以相互合作。 适配器的功能就是把一个不合适的接口转换成另一个合适的接口。

以手机充电器为例：手机充电器一般都是5V左右吧，咱天朝的家用交流电压220V，所以手机充电需要一个适配器（降压器）

> Mobile mobile = new Mobile();  
> V5Power v5Power = new V5PowerAdapter(new V200Power());  
> mobile.inputPower(v5Power);

### 桥接模式

**将抽象部分与它的实现部分分离**，使它们都可以独立的变化。

桥接模式又叫接口模式。

举例说明：

> 设想如果要绘制矩形、圆形、椭圆、正方形，我们至少需要4个形状类，但是如果绘制的图形需要具有不同的颜色，如红色、绿色、蓝色等，此时至少有如下两种设计方案：  
>
> - 第一种设计方案是为每一种形状都提供一套各种颜色的版本。
> - 第二种设计方案是根据实际需要对形状和颜色进行组合
>
> 对于有两个变化维度（即两个变化的原因）的系统，采用方案二来进行设计系统中类的个数更少，且系统扩展更为方便。设计方案二即是桥接模式的应用。桥接模式将继承关系转换为关联关系，从而降低了类与类之间的耦合，减少了代码编写量。

再比如：

> 一个Java桌面软件总是带有所在操作系统的视感(LookAndFeel)，如果一个Java软件是在Unix系统上开发的，那么开发人员看到的是Motif用户界面的视感；在Windows上面使用这个系统的用户看到的是Windows用户界面的视感；而一个在Macintosh上面使用的用户看到的则是Macintosh用户界面的视感，Java语言是通过所谓的Peer架构做到这一点的。Java为AWT中的每一个GUI构件都提供了一个Peer构件，在AWT中的Peer架构就使用了桥接模式

### 装饰模式

简单的说就是**动态的给一个对象添加额外的功能。**

即做到不修改原来的对象类，至少在原来的基础上加以装饰，添加部分新的功能或属性。

应用场景的话，就比如游戏里面，装备是一个类，宝石又是一个类（装饰类）。然后用宝石装饰原来的装备，这个就是装饰模式。动态的将功能加到了原来的装备类上，扩展了功能而且还不需要修改原来的装备类。这就是装饰模式。

### 外观模式

为系统向外界提供一个统一的接口，用来访问子系统的一群接口。**其实就是为了方便用户的使用，把一群操作封装成一个方法。**

应用场景的话，就比如：我比较喜欢看电影，于是买了投影仪、电脑、音响、设计了房间的灯光、买了爆米花机，然后我想看电影的时候，我需要**一键观影和一键关闭**。

然后我们把一系列的参数传进去，只需要调用一个方法就能做到一键操作。这就是外观模式。

### 代理模式

对代理模式我还是挺有感情的，因为当时面试饿了么的时候，老大问过我这个模式。当时其实听都没听过，就根据 “代理” 这个词跟他扯了一大堆，最后好像还真是那个意思。为我拿到offer做出了不少贡献。

所谓的代理模式，其实就是： **封装被代理对象，并限制外界对代理对象的访问。**

简单来说的话其实就是个中间层，想在访问一些类的时候做一些控制的时候需要使用，

装饰模式和代理模式的区别：**装饰器模式关注于在一个对象上动态的添加方法，然而代理模式关注于控制对对象的访问**。就是，一个是为了新增东西，一个是为了控制访问权限。<http://www.cnblogs.com/jaredlam/archive/2011/11/08/2241089.html> 

<br/>

## 行为型模式

### 命令模式

### 中介者模式

### 观察者模式

简单的说就是一个东西变化了，那么关注它的对象都会收到通知。应用场景的就像 微信公众号的关注、推送一样。

代码参考：

<https://github.com/enterprising/designPatterns/tree/master/src/observer>

### 状态模式

### 策略模式

